<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/showdown/dist/showdown.min.js"></script>
    <script>
        fetch("posts.json")
            .then(response => response.json())
            .then(data => {
                // Loop through the posts and create links and sections for each one
                for (let post of data.posts) {
                    // Create a link element
                    let li = document.CreateElement("li");
                    let link = document.createElement("a");
                    link.href = "#" + post.id;
                    link.textContent = post.title;
                    // Append the link to the navigation div
                    li.appendChild(link);
                    document.getElementById("toc").appendChild(li);


                    //create rowdiv element
                    let rowDiv = document.creatElement(div);
                    rowDiv.className = "row";
                    document.getElementById("posts").appendChild(rowDiv);
                    //create colDiv element
                    let colDiv = document.creatElement(div);
                    colDiv.className = "col-md-10";
                    rowDiv.appendChild(colDiv)
                    // Create a section element
                    let section = document.createElement("section");
                    section.id = post.id;
                    // Create a title element
                    let title = document.createElement("h1");
                    title.textContent = post.title;
                    // Append the title to the section
                    section.appendChild(title);
                    // Create a content element
                    let content = document.createElement("div");
                    content.className = "content";
                    // Append the content to the section
                    section.appendChild(content);
                    // Append the section to the main div
                    colDiv.appendChild(section);
                }
                // Load the markdown files and render them using Showdown
                let converter = new showdown.Converter();
                let sections = document.querySelectorAll("section");
                for (let section of sections) {
                    let id = section.id;
                    let contentDiv = section.querySelector(".content");
                    fetch("./_posts/" + id + ".md")
                        .then(response => response.text())
                        .then(text => {
                            let html = converter.makeHtml(text);
                            contentDiv.innerHTML = html;
                        });
                }
            });
    </script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-10">
                <div id="toc">

                </div>
            </div>
        </div>
    </div>

    <div class="container" id="posts">
    </div>
</body>

</html>